.services {
	background-color: var(--color-background-light);
	overflow: hidden;

	@media screen and (min-width: 768px) {
		.section-header__subtitle {
			margin-block-start: calc(var(--section-label-size) + 2rem);
		}
	}

	&__wrapper {
		display: flex;
        flex-direction: column;
        gap: 3.5rem;

		.section-header {
			gap: 1.5rem;

			@media screen and (min-width: 768px) {
				gap: 3rem;
			}
		}
	}

	&__list {
		display: flex;
		flex-direction: row;
		gap: 1.5rem;

		> * {
			flex-grow: 1;
			flex-shrink: 0;
			flex-basis: clamp(256px, 50vw, 300px);
		}
	}
}

// Service Card
.service-card {
	display: flex;
	flex-direction: column;
	max-height: 400px;

	border-radius: var(--radius-lg);
	overflow: hidden;
	background-color: var(--color-white);

	&__details {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		padding: 1.5rem;
		text-wrap: pretty;
		background-image: linear-gradient(
			180deg,
			white 70%,
			rgba(255, 255, 255, 0)
		);
		position: relative;
		z-index: 1;
		transition: transform 0.4s ease;
	}

	&__title-wrapper {
		display: flex;
		flex-direction: row;
		place-items: center;

		gap: 0.5rem;
	}

	&__title {
		font-size: 1.25rem;
		line-height: 1.5;
	}

	&__description {
		font-size: 0.875rem;
		line-height: 1.5;
		transition: transform 0.4s ease, opacity 0.2s linear;
	}

	&__image-container {
		flex-grow: 1;
	}

	&__image {
		border-radius: var(--radius-md);
		overflow: hidden;
	}

	// States
	@media screen and (hover: hover) {
		&:not(:hover) {
			.service-card__details {
				transform: translateY(1rem);
			}
			.service-card__description {
				transform: translateY(25%);
				opacity: 0;
			}
		}
	}

	// Types
	&[data-type="websites"] {
		.service-card__image-container {
			display: grid;
			place-content: center;
			place-items: center;

			.service-card__image {
				--offset-x: 20%;

				aspect-ratio: 3/2;
				width: 100%;
				max-width: 90%;
				grid-area: 1/1;
				transition: transform 0.4s ease, box-shadow 0.2s ease;

				&:nth-child(1) {
					z-index: 1;
					transform: translateY(calc(var(--offset-x) * -0.5));
					box-shadow: 0px 20px 40px -30px rgba(0, 0, 0, 0.5);
				}
				&:nth-child(2) {
					transform: translateX(var(--offset-x)) scale(0.8) rotate(5deg);
				}
				&:nth-child(3) {
					transform: translateX(calc(var(--offset-x) * -1)) scale(0.8)
						rotate(-5deg);
				}
			}
		}

		// States
		@media screen and (hover: hover) {
			&:not(:hover) {
				.service-card__image {
					--offset-x: 0%;
					&:nth-child(1) {
						box-shadow: 0px 0px 0px 0px rgba(0, 0, 0, 0.5);
					}
				}
			}
		}
	}

	&[data-type="mobile"] {
		.service-card__image-container {
			--gap: 1rem;

			display: grid;
			padding-inline: 1.5rem;
			grid-template-columns: repeat(2, 1fr);
			grid-template-rows: repeat(3, 1fr);
			gap: var(--gap);
			// transform: rotate(-15deg);

			.service-card__image {
				transition: transform 0.4s ease, opacity 0.2s linear;

				&:nth-child(1) {
					grid-area: 1 / 2 / 3 / 3;
					place-self: stretch;
					object-fit: cover;
				}
				&:not(:nth-child(1)) {
					transform: translateY(0%);
				}
			}
		}

		// States
		@media screen and (hover: hover) {
			&:not(:hover) {
				.service-card__image {
					--offset-x: 0%;
					&:not(:nth-child(1)) {
						transform: translateY(calc(-100% - var(--gap)));
					}
					&:nth-child(2) {
						opacity: 0;
						// transition: transform 0.4s ease, opacity 0.15s linear;
						transition-delay: 0s;
					}
				}
			}
		}
	}

	&[data-type="design-system"] {
		.service-card__image-container {
			--gap: 1rem;

			display: grid;
			padding-inline: 1.5rem;
			grid-template-columns: repeat(3, 1fr);
			grid-template-rows: repeat(3, auto);
			gap: var(--gap);
			width: 150%;
			transform: translateY(5%) rotate(-15deg);
			transition: transform 0.4s ease;

			.service-card__image {
				transition: transform 0.4s ease, opacity 0.2s linear;

				&:nth-child(1) {
					grid-area: 2 / 1 / 3 / 3;
					place-self: stretch;
					object-fit: cover;
					aspect-ratio: 3/2;
				}

				&:nth-child(4) {
					grid-area: 1 / 3 / 3 / 3;
					align-self: stretch;
					object-fit: cover;
				}

				&:not(:nth-child(1)) {
					transform: translateY(0%);
				}
			}
		}

		// States
		@media screen and (hover: hover) {
			&:not(:hover) {
				.service-card__image-container {
					transform: translateX(-25%) translateY(5%) rotate(-15deg);
				}
			}
		}
	}

	&[data-type="consulting"] {
		.service-card__image-container {
			display: grid;
			place-content: start;
			place-items: start;

			.service-card__image {
				--index-image: 0;
				--offset-x: 20%;

				aspect-ratio: 3/2;
				width: 100%;
				max-width: 90%;
				grid-area: 1/1;
				transform: translateX(calc(var(--offset-x) * var(--index-image)))
					translateY(calc(var(--offset-x) * var(--index-image)))
					rotate(calc(15deg * var(--index-image)));
				box-shadow: 0px 20px 40px -30px rgba(0, 0, 0, 0.5);
                transition: transform 0.4s ease, opacity 0.1s linear;

				&:nth-child(1) {
					z-index: 3;
				}
				&:nth-child(2) {
					--index-image: 0.5;
					z-index: 2;
				}
				&:nth-child(3) {
					--index-image: 1;
					z-index: 1;
				}
				&:nth-child(4) {
					--index-image: 2;
					z-index: 0;
                    opacity: 0;
				}
			}
		}

        // States
		@media screen and (hover: hover) {
			&:not(:hover) {
				.service-card__image-container {
                    .service-card__image {
                        &:nth-child(1) {
                            --index-image: -1;
                            opacity: 0;
                        }
                        &:nth-child(2) {
                            --index-image: 0;
                        }
                        &:nth-child(3) {
                            --index-image: 0.5;
                        }
                        &:nth-child(4) {
                            --index-image: 1;
                            opacity: 1;
                        }
                    }
				}
			}
		}
	}
}
